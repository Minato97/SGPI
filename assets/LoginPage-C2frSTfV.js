import{Q as d,a as x}from"./QCard-DnYpFCHr.js";import{Q as i}from"./use-router-link-CZwdicpq.js";import{Q as m}from"./QInput-B2qfRJWU.js";import{Q as p}from"./QBtn-B5HkUs5I.js";import{Q as b}from"./QForm-C0oYoBzZ.js";import{u as C,_ as h}from"./usuarioStore-DVGrTzTa.js";import{_ as Q,u as I,o as S,e as B,a as o,w as a,d as c,S as s,f}from"./index-B3W15PeQ.js";import{api as g}from"./axios-Betu2sJb.js";import"./render-5ozSKYE2.js";import"./use-dark-BCsfM407.js";import"./uid-Bzmka5Fh.js";import"./dom-BeWSrDBV.js";import"./pinia-mStIRTgv.js";const V={class:"login-container"},k={class:"row justify-center q-gutter-sm q-mb-md"},P={__name:"LoginPage",setup(R){const v=I(),w=C(),t=f({email:"ejemplo@gmail.com",password:"admin"}),l=f(!0),y=async()=>{if(!t.value.email||!t.value.password){s.fire({icon:"error",title:"Campos vac칤os",text:"Por favor completa todos los campos",confirmButtonColor:"#f26b1d"});return}s.fire({title:"Iniciando sesi칩n...",text:"Por favor espera",allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>{s.showLoading()}});try{const r=(await g.post("/auth/login",{email:t.value.email,password:t.value.password})).data;localStorage.setItem("token",r);const u=(await g.get("/auth/profile")).data;w.setUsuario(u),s.fire({icon:"success",title:`춰Bienvenido ${u.name}! 游녦`,text:"Inicio de sesi칩n exitoso",showConfirmButton:!1,timer:2500}).then(()=>{v.push("/investigador")})}catch(n){s.fire({icon:"error",title:"Error",text:n.response?.data?.message||"Correo o contrase침a incorrectos",confirmButtonColor:"#f26b1d"})}},_=()=>{t.value.email="",t.value.password=""};return(n,r)=>(S(),B("div",V,[o(x,{class:"login-card"},{default:a(()=>[o(d,{class:"text-secondary text-center"},{default:a(()=>[...r[3]||(r[3]=[c("img",{src:h,width:"400"},null,-1),c("div",{class:"text-h5 text-center text-secondary text-weight-bold"},"Iniciar Sesi칩n",-1)])]),_:1}),o(d,null,{default:a(()=>[o(b,{onSubmit:y,onReset:_,class:"q-gutter-lg form-login"},{default:a(()=>[o(m,{rounded:"",outlined:"",color:"secondary","bg-color":"white",modelValue:t.value.email,"onUpdate:modelValue":r[0]||(r[0]=e=>t.value.email=e),label:"Correo electr칩nico",type:"text","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa tu correo",e=>e&&e.includes("@")||"Ingresa un correo v치lido"]},{prepend:a(()=>[o(i,{color:"accent",name:"email"})]),_:1},8,["modelValue","rules"]),o(m,{rounded:"",outlined:"","bg-color":"white",color:"secondary",modelValue:t.value.password,"onUpdate:modelValue":r[2]||(r[2]=e=>t.value.password=e),type:l.value?"password":"text",label:"Contrase침a","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa tu contrase침a",e=>e&&e.length>=5||"M칤nimo 5 caracteres"]},{prepend:a(()=>[o(i,{color:"accent",name:"lock"})]),append:a(()=>[o(i,{color:"accent",name:l.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:r[1]||(r[1]=e=>l.value=!l.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),c("div",k,[o(p,{rounded:"",label:"Ingresar",type:"submit",color:"secondary",icon:"login"}),o(p,{outline:"",rounded:"",label:"Limpiar",type:"reset",color:"secondary",icon:"clear"})])]),_:1})]),_:1})]),_:1})]))}},D=Q(P,[["__scopeId","data-v-136f39d6"]]);export{D as default};
