import{a as v,Q as g}from"./QCard-DnYpFCHr.js";import{Q as x}from"./QPage-DK_nuJm2.js";import{_ as C}from"./TableComponent-CaIXt0RV.js";import{api as b}from"./axios-Betu2sJb.js";import{K as _,o as P,c as y,w as i,a as l,d as B,S as r,f as c}from"./index-B3W15PeQ.js";import"./render-5ozSKYE2.js";import"./use-dark-BCsfM407.js";import"./use-router-link-CZwdicpq.js";import"./QInput-B2qfRJWU.js";import"./QBtn-B5HkUs5I.js";import"./dom-BeWSrDBV.js";import"./uid-Bzmka5Fh.js";import"./QSeparator-DE86E2wC.js";import"./QList-CnJMVm5T.js";import"./QSelect-BOechrq_.js";import"./QItem-ByUYPULS.js";import"./use-prevent-scroll-CPoo3ChQ.js";import"./scroll-BpWoqF-M.js";import"./use-tick-Db393Wnc.js";import"./use-timeout-D4exlf2N.js";const $={__name:"ProyectosPage",setup(k){const m=c([]),n=c(!1),e=c({sortBy:"id",descending:!1,page:1,rowsPerPage:5,rowsNumber:0}),w=[{name:"id",label:"ID",field:"id",sortable:!0,align:"left"},{name:"title",label:"Título",field:"title",sortable:!0,align:"left"},{name:"description",label:"Descripción",field:"description",sortable:!0,align:"left"},{name:"score",label:"Calificación",field:"score",sortable:!0,align:"center"},{name:"createAt",label:"Creado el",field:"createAt",sortable:!0,align:"center"}];async function p(s){const{page:t,rowsPerPage:o,sortBy:u,descending:d}=s.pagination,f=s.filter||"";n.value=!0,r.fire({title:"Cargando...",text:"Espere un momento mientras obtenemos la información.",allowOutsideClick:!1,didOpen:()=>{r.showLoading()}});try{let a;f.trim()!==""?a=await b.get("/projects/search",{params:{term:f,page:t,take:o}}):a=await b.get("/projects",{params:{page:t,take:o,sortBy:u,descending:d}}),m.value=a.data.data,e.value.rowsNumber=Number(a.data.pagination.totalCount),e.value.page=t,e.value.rowsPerPage=o,e.value.sortBy=u,e.value.descending=d,r.close()}catch(a){console.error("Error al obtener la información:",a),r.close(),await r.fire({icon:"error",title:"Error",text:"Hubo un problema al obtener la información.",confirmButtonText:"Continuar",confirmButtonColor:"#f26b1d"})}finally{n.value=!1}}return _(()=>{p({pagination:e.value})}),(s,t)=>(P(),y(x,{class:"flex flex-center"},{default:i(()=>[l(v,{class:"login-card"},{default:i(()=>[l(g,{class:"titulo-pestana text-center"},{default:i(()=>[...t[1]||(t[1]=[B("div",{class:"text-h4 text-weight-bold text-white"},"PROYECTOS",-1)])]),_:1}),l(g,null,{default:i(()=>[l(C,{title:"Listado de proyectos",columns:w,rows:m.value,loading:n.value,pagination:e.value,"onUpdate:pagination":t[0]||(t[0]=o=>e.value=o),onRequest:p},null,8,["rows","loading","pagination"])]),_:1})]),_:1})]),_:1}))}};export{$ as default};
