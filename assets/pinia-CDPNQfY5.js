import{b as N}from"./index-B3W15PeQ.js";import{c as P}from"./pinia-mStIRTgv.js";function v(e,t){if(e==null)return;let r=e;for(let i=0;i<t.length;i++){if(r===void 0||r[t[i]]===void 0)return;if(r===null||r[t[i]]===null)return null;r=r[t[i]]}return r}function f(e,t,r){if(r.length===0)return t;const i=r[0];return r.length>1&&(t=f(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,i)?Number.isInteger(Number(r[1]))?[]:{}:e[i],t,Array.prototype.slice.call(r,1))),Number.isInteger(Number(i))&&Array.isArray(e)?e.slice()[i]:Object.assign({},e,{[i]:t})}function A(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const r={};for(const i in e)r[i]=e[i];return delete r[t[0]],r}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const r={};for(const i in e)r[i]=e[i];return r}return f(e,A(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function S(e,t){return t.map(r=>r.split(".")).map(r=>[r,v(e,r)]).filter(r=>r[1]!==void 0).reduce((r,i)=>f(r,i[1],i[0]),{})}function $(e,t){return t.map(r=>r.split(".")).reduce((r,i)=>A(r,i),e)}function m(e,{storage:t,serializer:r,key:i,debug:n,pick:a,omit:c,beforeHydrate:s,afterHydrate:u},l,d=!0){try{d&&s?.(l);const o=t.getItem(i);if(o){const y=r.deserialize(o),g=a?S(y,a):y,z=c?$(g,c):g;e.$patch(z)}d&&u?.(l)}catch(o){n&&console.error("[pinia-plugin-persistedstate]",o)}}function p(e,{storage:t,serializer:r,key:i,debug:n,pick:a,omit:c}){try{const s=a?S(e,a):e,u=c?$(s,c):s,l=r.serialize(u);t.setItem(i,l)}catch(s){n&&console.error("[pinia-plugin-persistedstate]",s)}}function O(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function H(e,t,r){const{pinia:i,store:n,options:{persist:a=r}}=e;if(!a)return;if(!(n.$id in i.state.value)){const s=i._s.get(n.$id.replace("__hot:",""));s&&Promise.resolve().then(()=>s.$persist());return}const c=(Array.isArray(a)?a:a===!0?[{}]:[a]).map(t);n.$hydrate=({runHooks:s=!0}={})=>{c.forEach(u=>{m(n,u,e,s)})},n.$persist=()=>{c.forEach(s=>{p(n.$state,s)})},c.forEach(s=>{m(n,s,e),n.$subscribe((u,l)=>p(l,s),{detached:!0})})}function I(e={}){return function(t){H(t,r=>{const i=O(r.key,t.store.$id);return{key:(e.key?e.key:n=>n)(i),debug:r.debug??e.debug??!1,serializer:r.serializer??e.serializer??{serialize:n=>JSON.stringify(n),deserialize:n=>JSON.parse(n)},storage:r.storage??e.storage??window.localStorage,beforeHydrate:r.beforeHydrate??e.beforeHydrate,afterHydrate:r.afterHydrate??e.afterHydrate,pick:r.pick,omit:r.omit}},e.auto??!1)}}var _=I();const E=N(({app:e})=>{const t=P();t.use(_),e.use(t)});export{E as default};
